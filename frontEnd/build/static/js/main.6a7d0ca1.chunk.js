(this["webpackJsonptodo-demo-web"]=this["webpackJsonptodo-demo-web"]||[]).push([[0],{174:function(e,t,n){},176:function(e,t,n){},270:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),i=n(29),c=n.n(i),r=n(159),l=n(26),u=n(94),d=n(95),o=n(113),j=n(111),h=(n(174),n(14)),b=function(e){Object(o.a)(n,e);var t=Object(j.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(h.jsxs)("div",{className:"header",children:[Object(h.jsx)("h1",{children:"\u5bfc\u822a"}),Object(h.jsx)("a",{href:"#/list",children:"\u4efb\u52a1\u5217\u8868\u9875\u9762"})]})}}]),n}(s.a.Component),p=n(96),f=(n(176),n(46)),x=n.n(f),O=n(88),m=n(164),v=n(280),y=n(34),g=n(281),k=n(272),C=n(275),S=n(279),D=n(277),w=n(273),q=n(274),F=n(278),I=n(276),T=n(153),N=n.n(T).a.create({withCredentials:!0});N.interceptors.request.use((function(e){return e.hideloading,e}),(function(e){return Promise.reject(e)})),N.interceptors.response.use((function(e){return Promise.resolve(e)}),(function(e){return m.b.error("\u7cfb\u7edf\u51fa\u73b0\u5f02\u5e38\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5"),Promise.reject(e)}));var R=N,H=O.a.Option,M=function(e){Object(o.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).formRef=s.a.createRef(),a.onClose=function(){a.setState({visible:!1})},a.addHandel=function(){a.setState({visible:!0,type:"add"},(function(){a.formRef.current.resetFields()}))},a.changeStatus=function(e){3===e.status?(e.status=1,R.post("/api/update_status",e).then((function(e){a.queryData("-1"),m.b.success("\u72b6\u6001\u53d8\u66f4\u4ee3\u529e\u6210\u529f")}))):1===e.status&&(e.status=2,R.post("/api/update_status",e).then((function(e){a.queryData("-1"),m.b.success("\u72b6\u6001\u53d8\u66f4\u5b8c\u6210")})))},a.delHandel=function(e){m.b.success("\u4efb\u52a1\u5220\u9664\u6210\u529f"),e.status=3,R.post("/api/update_status",e).then((function(e){a.queryData("-1")}))},a.queryData=a.queryData.bind(Object(p.a)(a)),a.state={columns:[{title:"id",dataIndex:"id",key:"id",width:100,align:"center"},{title:"\u6807\u9898",dataIndex:"name",key:"name",width:100,align:"center"},{title:"\u5185\u5bb9",dataIndex:"content",key:"content",width:300,align:"center"},{title:"\u622a\u6b62\u65e5\u671f",dataIndex:"deadline",key:"deadline",width:150,align:"center"},{title:"\u72b6\u6001",dataIndex:"status",key:"status",width:300,align:"center",render:function(e,t){return 1===t.status?"\u5f85\u529e":2===t.status?"\u5b8c\u6210":"\u5df2\u5220\u9664"}},{title:"Action",key:"action",render:function(e,t){return Object(h.jsxs)(v.b,{size:"middle",children:[Object(h.jsx)(y.a,{onClick:function(){return a.editHander(t)},children:"\u7f16\u8f91"}),3!==t.status&&2!==t.status?Object(h.jsxs)("div",{children:[Object(h.jsx)(y.a,{type:"primary",ghost:!0,onClick:function(){return a.changeStatus(t)},children:"\u5b8c\u6210"}),Object(h.jsx)(g.a,{title:"\u4f60\u786e\u5b9a\u8981\u5220\u9664\u5417?",onConfirm:function(){return a.delHandel(t)},okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",children:Object(h.jsx)(y.a,{danger:!0,className:"delete-line",children:"\u5220\u9664"})})]}):null]})},filters:[{text:"\u5168\u90e8",value:-1},{text:"\u4ee3\u529e",value:1},{text:"\u5b8c\u6210",value:2},{text:"\u5220\u9664",value:3}],filterMultiple:!1,onFilter:function(e,t){return e===t.status}}],visible:!1,listData:[],pageSize:5,total:0,page:1,type:"add",items:{}},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.queryData("-1")}},{key:"onReset",value:function(){this.formRef.current.resetFields()}},{key:"editHander",value:function(e){var t=this;this.setState({visible:!0,type:"update",items:e}),setTimeout((function(){t.formRef.current.setFieldsValue({name:e.name,content:e.content,deadline:x()(e.deadline),status:2===e.status?"\u5df2\u5b8c\u6210":1===e.status?"\u5f85\u5b8c\u6210":"\u5df2\u5220\u9664"})}))}},{key:"onFinish",value:function(e){var t=this;e.deadline=x()(e.deadline).format("YYYY-MM-DD");var n=this.state,a=n.type,s=n.saveStatus,i=n.items;"add"===a?(e.status=1,R.post("/api/create",e).then((function(e){m.b.success("\u4efb\u52a1\u65b0\u589e\u5b8c\u6210"),t.queryData("-1"),t.setState({visible:!1})}))):(e.status=s||i.status,e.id=i.id,R.post("/api/update",e).then((function(e){m.b.success("\u4efb\u52a1\u4fee\u6539\u5b8c\u6210"),t.queryData("-1"),t.setState({visible:!1})})))}},{key:"queryData",value:function(e){var t=this;R.get("/api/list/"+e+"/"+this.state.page).then((function(e){e.data.list.rows.forEach((function(e,t){e.key=t}));var n=e.data.list.rows;n.forEach((function(e){var t;e.deadline=null===(t=e.deadline)||void 0===t?void 0:t.split("T")[0]})),t.setState({listData:n,total:e.data.list.count})}))}},{key:"pageChange",value:function(e){var t=this;this.setState({page:e},(function(){t.queryData("-1")}))}},{key:"selectStatus",value:function(e){console.log("--type--",e),this.setState({saveStatus:e})}},{key:"disabledDate",value:function(e){return e&&e<x()().subtract(1,"days").endOf("day")}},{key:"render",value:function(){var e=this,t=this.state,n=t.columns,a=t.total,s=t.pageSize,i=t.listData,c=t.type,r=t.visible,l=t.items;return Object(h.jsxs)("div",{className:"wrapper",children:[Object(h.jsxs)("div",{className:"header",children:[Object(h.jsx)("h1",{children:"\u5bfc\u822a"}),Object(h.jsx)("a",{href:"/home",children:"\u8fd4\u56de\u9996\u9875"})]}),Object(h.jsx)("div",{className:"divide",children:Object(h.jsx)(k.a,{children:"\u4efb\u52a1\u5217\u8868"})}),Object(h.jsxs)("div",{className:"box",children:[Object(h.jsx)(y.a,{type:"primary",onClick:this.addHandel,children:"\u65b0\u589e"}),Object(h.jsx)("div",{className:"table",children:Object(h.jsx)(C.a,{columns:n,dataSource:i,pagination:{showQuickJumper:!1,showTotal:function(){return"\u5171".concat(a,"\u6761")},pageSize:s,total:a,onChange:function(t){return e.pageChange(t)}}})})]}),Object(h.jsx)(S.a,{title:"update"===c?"\u4fee\u6539\u4efb\u52a1":"\u65b0\u589e\u4efb\u52a1",width:500,placement:"right",closable:!1,onClose:this.onClose,visible:r,children:Object(h.jsxs)(D.a,{layout:"vertical",ref:this.formRef,onFinish:function(t){return e.onFinish(t)},children:[Object(h.jsx)(w.a,{gutter:16,children:Object(h.jsx)(q.a,{span:24,children:Object(h.jsx)(D.a.Item,{name:"name",label:"\u4efb\u52a1\u540d\u79f0:",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4efb\u52a1\u540d\u79f0"}],children:Object(h.jsx)(F.a,{placeholder:"\u8bf7\u8f93\u5165\u4efb\u52a1\u540d\u79f0"})})})}),Object(h.jsx)(w.a,{gutter:16,children:Object(h.jsx)(q.a,{span:24,children:Object(h.jsx)(D.a.Item,{name:"deadline",label:"\u4efb\u52a1\u622a\u6b62\u65e5\u671f:",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u4efb\u52a1\u622a\u6b62\u65e5\u671f"}],children:Object(h.jsx)(I.a,{className:"dateStyle",autoFocus:!0,disabledDate:function(t){return e.disabledDate(t)}})})})}),"update"===c&&2===l.status&&Object(h.jsx)(w.a,{gutter:16,children:Object(h.jsx)(q.a,{span:24,children:Object(h.jsx)(D.a.Item,{name:"status",label:"\u4fee\u6539\u72b6\u6001:",rules:[{required:!1}],children:Object(h.jsxs)(O.a,{placeholder:"\u8bf7\u9009\u62e9\u72b6\u6001",onChange:function(t){return e.selectStatus(t)},allowClear:!0,children:[Object(h.jsx)(H,{value:"1",children:"\u5f85\u529e"}),Object(h.jsx)(H,{value:"3",children:"\u5220\u9664"})]})})})}),Object(h.jsx)(w.a,{gutter:16,children:Object(h.jsx)(q.a,{span:24,children:Object(h.jsx)(D.a.Item,{name:"content",label:"\u4efb\u52a1\u5185\u5bb9:",rules:[{required:!1}],children:Object(h.jsx)(F.a.TextArea,{placeholder:"\u8bf7\u586b\u5199\u5185\u5bb9"})})})}),Object(h.jsxs)(w.a,{gutter:16,children:[Object(h.jsx)(q.a,{span:8,children:Object(h.jsx)(y.a,{type:"primary",htmlType:"submit",children:"\u63d0\u4ea4"})}),Object(h.jsxs)(q.a,{span:8,children:[Object(h.jsx)(y.a,{onClick:function(){return e.onReset()},children:"\u91cd\u7f6e"})," "]}),Object(h.jsx)(q.a,{span:8,children:Object(h.jsx)(y.a,{type:"primary",danger:!0,onClick:this.onClose,children:"\u53d6\u6d88"})})]})]})})]},1)}}]),n}(a.Component),P=function(){return Object(h.jsx)(r.a,{children:Object(h.jsxs)(l.c,{children:[Object(h.jsx)(l.a,{exact:!0,path:"/",component:b}),Object(h.jsx)(l.a,{exact:!0,path:"/list",component:M})]})})},z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,282)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),s(e),i(e),c(e)}))},Y=n(163),E=n(17);c.a.render(Object(h.jsx)(E.a,{locale:Y.a,children:Object(h.jsxs)(s.a.StrictMode,{children:[Object(h.jsx)(P,{}),","]})}),document.getElementById("root")),z()}},[[270,1,2]]]);
//# sourceMappingURL=main.6a7d0ca1.chunk.js.map